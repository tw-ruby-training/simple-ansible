---
# The max clients allowed
nginx_max_clients: 512 

# The user to run nginx
nginx_user: "nginx"

# A list of hashs that define the servers for nginx,
# as with http parameters. Any valid server parameters
# can be defined here.
nginx_http_params:
  - sendfile on
  - access_log /var/log/zhaocaimao/nginx_access.log my_logformat;
  - error_log /var/log/zhaocaimao/nginx_error.log;
  - client_max_body_size 10M;
  - keepalive_timeout 30;

nginx_sites:
 default:
     - listen 80
     - server_name _
     - root "/var/www/current/public"
     - location ~* ^(/assets|/favicon.ico|images|javascripts|stylesheets|img) {log_not_found off; access_log off; expires max;}
     - location / { proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Server $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_buffering on; proxy_pass http://unicorn; }
 
# A list of hashs that define additional configuration
nginx_configs:
  upstream:
      - upstream unicorn { server unix:/tmp/unicorn.zhaocaimao.sock fail_timeout=0; }
  gzip:
      - gzip on
      - gzip_disable msie6

# A list of hashs that define uer/password files
nginx_auth_basic_files:
   demo:
     - foo:$apr1$mEJqnFmy$zioG2q1iDWvRxbHuNepIh0 # foo:demo , generated by : htpasswd -nb foo demo
     - bar:$apr1$H2GihkSo$PwBeV8cVWFFQlnAJtvVCQ. # bar:demo , generated by : htpasswd -nb bar demo
